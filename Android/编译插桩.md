# 编译插桩

    AspectJ
    ASM
    ReDex

## AspectJ

### 使用方法

    1. 为方法类添加 @Aspect 注解
    2. 在对应方法中添加 @After("execution(* [类路径 ])")

``` java
@Aspect
public class ActivityAspect {
    
    @Before("execution(* android.app.Activity.onCreate(..))")
    public void onCreateMethod(org.aspectj.lang.JoinPoint joinPoint) throws Throwable {
        System.out.println("Update onCreateMethod_Before" + joinPoint.getSignature());
    }

    @After("execution(* android.app.Activity.onCreate(..))")
    public void onCreateMethod(org.aspectj.lang.JoinPoint joinPoint) throws Throwable {
        System.out.println("Update onCreateMethod_After" + joinPoint.getSignature());
    }

     @Around("execution(* android.app.Activity.onCreate(..))")
    public void onCreateMethodAround(org.aspectj.lang.JoinPoint joinPoint) throws Throwable {
        System.out.println("Update onCreateMethod_Around" + joinPoint.getSignature());
    }

}
```

运行结果如下图 已插入成功

``` js
    Update onCreateMethod_Beforevoid android.support.v7.app.AppCompatActivity.onCreate(Bundle)
    Update onCreateMethod_Beforevoid android.support.v4.app.FragmentActivity.onCreate(Bundle)
    Update onCreateMethod_Beforevoid android.support.v4.app.SupportActivity.onCreate(Bundle)
    Update onCreateMethod_Aftervoid android.support.v4.app.SupportActivity.onCreate(Bundle)
    Update onCreateMethod_Aftervoid android.support.v4.app.FragmentActivity.onCreate(Bundle)
    Update onCreateMethod_Aftervoid android.support.v7.app.AppCompatActivity.onCreate(Bundle)
    com.update.aspectjxdemo I/System.out: Update onCreateNow
    Update onCreateMethod_Aftervoid com.update.aspectjxdemo.MainActivity.onCreate(Bundle)
```

适用场景:

    动态埋点,打印日志之类的都可以这样实现,